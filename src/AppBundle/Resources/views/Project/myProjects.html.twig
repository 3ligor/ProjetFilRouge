{% extends "AppBundle::layout.html.twig" %}

{% block content %}
    <h3>Mes projets en attente</h3>
    <div class="row">
		<table class="table table-hover">
			<thead>
			<th>Type</th>
			<th>Intitulé du projet</th>
			<th>Avancement</th>
			<th>Lancement</th>
			<th>Fin</th>
			<th>Nombre</th>
			<th>..</th>
			</thead>
			
			{% set cpt = 0 %}
				{% for project in projects %}
					{% set cpt = cpt+1 %}
						{% if project.status == -1 or project.status == 0%}
							
							<tr>
							<td>{% for category in project.categories %} 
								{{ category.title }}
							{% endfor %}</td>
							<td>{{ project.title }}</td>
							<td>
								<div class="progress">
								<div class="progress-bar 
									 {% if project.getProgress.term <= 33 %}}
										 progress-bar-danger
									 {% elseif project.getProgress.term <= 67%}
										 progress-bar-warning
									 {% else %}
										 progress-bar-success
									 {% endif %}" 
									 role="progressbar" 
									 aria-valuenow="{{ project.getProgress.term }}" 
									 aria-valuemin="0" 
									 aria-valuemax="100" 
									 style="width: {{ project.getProgress.term }}%;">
									<strong>{{ project.getProgress.term }}%</strong>
								</div>
							</div>
							</td>
							<td>{{ project.startDate.format('d-m-Y') }}</td>
							<td>{{ project.endDate.format('d-m-Y') }}</td>
							<td>{{ project.userProjects | length }} <span class="glyphicon glyphicon-user"></span></td>
							<td><a href="{{ path('project_detail', { id: project.id }) }}">Details</a></td>
							</tr>
						
						{% endif %}
							{% if cpt == 0 %}
							<tr><td colspan=7"> Vous avez aucun projet en cours</td></tr>
						{% endif %}
					
				{% endfor %}
		
		</table>
    </div>
    <h3>Mes projets en cours</h3>
    <div class="row">
		<table class="table table-hover">
			<thead>
			<th>Type</th>
			<th>Intitulé du projet</th>
			<th>Avancement</th>
			<th>Lancement</th>
			<th>Fin</th>
			<th>Nombre</th>
			<th>..</th>
			</thead>
				
				{% for project in projects %}
						
						{% if project.status == 4 %}
							
							<tr>
							<td> {% for category in project.categories %} 
								{{ category.title }}
							{% endfor %}</td>
							<td>{{ project.title }}</td>
							<td>
								<div class="progress">
								<div class="progress-bar 
									 {% if project.getProgress.term <= 33 %}}
										 progress-bar-danger
									 {% elseif project.getProgress.term <= 67%}
										 progress-bar-warning
									 {% else %}
										 progress-bar-success
									 {% endif %}" 
									 role="progressbar" 
									 aria-valuenow="{{ project.getProgress.term }}" 
									 aria-valuemin="0" 
									 aria-valuemax="100" 
									 style="width: {{ project.getProgress.term }}%;">
									<strong>{{ project.getProgress.term }}%</strong>
								</div>
							</div>
							</td>
							<td>{{ project.startDate.format('d-m-Y') }}</td>
							<td>{{ project.endDate.format('d-m-Y') }}</td>
							<td>{{ project.userProjects | length }} <span class="glyphicon glyphicon-user"></span></td>
							<td><a href="{{ path('project_detail', { id: project.id }) }}">Details</a></td>
						</tr>
						{% endif %}	
						
				{% endfor %}
				
			
		</table>
    </div>
    <h3>Mes projets archivés</h3>
    <div class="row">

		<table class="table table-hover">
			<thead>
			<th>Type</th>
			<th>Intitulé du projet</th>
			<th>Avancement</th>
			<th>Lancement</th>
			<th>Fin</th>
			<th>Nombre</th>
			<th>..</th>
			</thead>
			
				{% for project in projects %}
						
						{% if project.status != -1 and project.status != 0 and project.status != 4 %}
							
							<tr>
							<td>{% for category in project.categories %} 
								{{ category.title }}
							{% endfor %}</td>
							<td>{{ project.title }}</td>
							<td>
								<div class="progress">
								<div class="progress-bar 
									 {% if project.getProgress.term <= 33 %}}
										 progress-bar-danger
									 {% elseif project.getProgress.term <= 67%}
										 progress-bar-warning
									 {% else %}
										 progress-bar-success
									 {% endif %}" 
									 role="progressbar" 
									 aria-valuenow="{{ project.getProgress.term }}" 
									 aria-valuemin="0" 
									 aria-valuemax="100" 
									 style="width: {{ project.getProgress.term }}%;">
									<strong>{{ project.getProgress.term }}%</strong>
								</div>
							</div>
							</td>
							<td>{{ project.startDate.format('d-m-Y') }}</td>
							<td>{{ project.endDate.format('d-m-Y') }}</td>
							<td>{{ project.userProjects | length }} <span class="glyphicon glyphicon-user"></span></td>
							<td><a href="{{ path('project_detail', { id: project.id }) }}">Details</a></td>
							</tr>
					
						{% endif %}
					
				{% endfor %}
			</tr>
		</table>
    </div>
{% endblock content %}

